/**
  * ProbaClick - Do something when someone is probably going to click something.
  * Author: Alex MacArthur
  * Version: v1.1.1
  * License: MIT
  * URL: https://github.com/alexmacarthur/probaclick#readme
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ProbaClick=t()}(this,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.max,r=n.delay,o=n.callback,a=n.count;e(this,i),this.max=s,this.link=t,this.callback=o,this.triggers={delay:r,count:a},this.hasJustFired=!1,this.totalFireCount=0,this.hoverStart=0,this.timeout=null,this.store={time:0,interactions:0},this.eventHandlers={mouseover:this.handleMouseOver.bind(this),mouseleave:this.handleMouseLeave.bind(this)},this.updateListeners("add")}var n,s,r;return n=i,(s=[{key:"handleMouseOver",value:function(){this.hasJustFired=!1,this.hoverStart=Date.now(),this.store.interactions++,this.maybeFireBasedOnCount()||this.maybeFireBasedOnTime()}},{key:"maybeFireBasedOnCount",value:function(){return null!==this.triggers.count&&this.store.interactions>=this.triggers.count&&(this.fire(),!0)}},{key:"maybeFireBasedOnTime",value:function(){var e=this;return null!==this.triggers.delay&&(this.timeout=setTimeout((function(){e.fire()}),this.triggers.delay-this.store.time),this.timeout)}},{key:"fire",value:function(){this.callback(this.link),this.totalFireCount++,this.resetStore(),this.hasJustFired=!0,null!==this.max&&this.totalFireCount>=this.max&&this.updateListeners("remove")}},{key:"handleMouseLeave",value:function(){clearTimeout(this.timeout),this.hasJustFired||this.updateStoreTime()}},{key:"updateListeners",value:function(e){for(var t in this.eventHandlers)this.link["".concat(e,"EventListener")](t,this.eventHandlers[t])}},{key:"resetStore",value:function(){this.store={time:0,interactions:0}}},{key:"updateStoreTime",value:function(){this.store.time=this.store.time+(Date.now()-this.hoverStart)}}])&&t(n.prototype,s),r&&t(n,r),i}();function n(e){return"string"==typeof e?e=document.querySelectorAll(e):e instanceof NodeList||(e=[e]),[].slice.call(e)}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.max,r=void 0===s?null:s,o=t.delay,a=void 0===o?500:o,u=t.count,l=void 0===u?null:u,h=t.callback,c=void 0===h?function(){}:h;return(e=n(e)).length?e.map((function(e){return new i(e,{delay:a,callback:c,max:r,count:l})})):[]}}));
